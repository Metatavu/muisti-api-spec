openapi: 3.0.0
info:
  version: 1.0.0
  title: Muisti API
security:
  - bearerAuth: []
paths:

  /exhibitions:
    get:
      operationId: listExhibitions
      summary: List exhibitions.
      description: Lists a exhibition
      tags:
        - Exhibitions
      responses:
        "200":
          description: A exhibition list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Exhibition"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createExhibition
      summary: Create a exhibition.
      description: Creates new exhibition
      tags:
        - Exhibitions
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Exhibition"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Exhibition"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}:
    get:
      operationId: findExhibition
      summary: Find a exhibition.
      description: Finds a exhibition by id
      tags:
        - Exhibitions
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Exhibition"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateExhibition
      summary: Updates exhibition.
      description: Updates exhibition
      tags:
        - Exhibitions
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Exhibition"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Exhibition"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteExhibition
      summary: Deletes exhibition.
      description: Delets exhibition
      tags:
        - Exhibitions
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/visitorSessions:
    get:
      operationId: listVisitorSessions
      summary: List visitor sessions
      description: List exhibition visitor sessions
      tags:
        - VisitorSessions
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A visitor session list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/VisitorSession"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createVisitorSession
      summary: Create a visitor session
      description: Creates new exhibition visitor session
      tags:
        - VisitorSessions
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VisitorSession"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition visitor session
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VisitorSession"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/visitorSessions/{visitorSessionId}:
    get:
      operationId: findVisitorSession
      summary: Find a visitor session
      description: Finds a visitor session by id
      tags:
        - VisitorSessions
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: visitorSessionId
          required: true
          in: path
          description: visitor session id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VisitorSession"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateVisitorSession
      summary: Updates visitor session.
      description: Updates visitor session.
      tags:
        - VisitorSessions
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VisitorSession"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: visitorSessionId
          required: true
          in: path
          description: visitor session id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VisitorSession"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteVisitorSession
      summary: Deletes visitor session.
      description: Delets exhibition visitor session.
      tags:
        - VisitorSessions
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: visitorSessionId
          required: true
          in: path
          description: visitor session id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/rooms:
    get:
      operationId: listExhibitionRooms
      summary: List rooms
      description: List exhibition rooms
      tags:
        - ExhibitionRooms
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A room list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ExhibitionRoom"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createExhibitionRoom
      summary: Create a room
      description: Creates new exhibition room
      tags:
        - ExhibitionRooms
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionRoom"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition room
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionRoom"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/rooms/{roomId}:
    get:
      operationId: findExhibitionRoom
      summary: Find a room
      description: Finds a room by id
      tags:
        - ExhibitionRooms
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: roomId
          required: true
          in: path
          description: room id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionRoom"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateExhibitionRoom
      summary: Updates room.
      description: Updates room.
      tags:
        - ExhibitionRooms
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionRoom"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: roomId
          required: true
          in: path
          description: room id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionRoom"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteExhibitionRoom
      summary: Deletes room.
      description: Delets exhibition room.
      tags:
        - ExhibitionRooms
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: roomId
          required: true
          in: path
          description: room id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"


  /exhibitions/{exhibitionId}/deviceGroups:
    get:
      operationId: listExhibitionDeviceGroups
      summary: List device groups
      description: List exhibition device groups
      tags:
        - ExhibitionDeviceGroups
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A device group list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ExhibitionDeviceGroup"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createExhibitionDeviceGroup
      summary: Create a device group
      description: Creates new exhibition device group
      tags:
        - ExhibitionDeviceGroups
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionDeviceGroup"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition device group
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDeviceGroup"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/deviceGroups/{deviceGroupId}:
    get:
      operationId: findExhibitionDeviceGroup
      summary: Find a device group
      description: Finds a device group by id
      tags:
        - ExhibitionDeviceGroups
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceGroupId
          required: true
          in: path
          description: device group id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDeviceGroup"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateExhibitionDeviceGroup
      summary: Updates device group.
      description: Updates device group.
      tags:
        - ExhibitionDeviceGroups
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionDeviceGroup"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceGroupId
          required: true
          in: path
          description: device group id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDeviceGroup"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteExhibitionDeviceGroup
      summary: Deletes device group.
      description: Delets exhibition device group.
      tags:
        - ExhibitionDeviceGroups
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceGroupId
          required: true
          in: path
          description: device group id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/deviceModels:
    get:
      operationId: listExhibitionDeviceModels
      summary: List device models
      description: List exhibition device models
      tags:
        - ExhibitionDeviceModels
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A device model list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ExhibitionDeviceModel"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createExhibitionDeviceModel
      summary: Create a device model
      description: Creates new exhibition device model
      tags:
        - ExhibitionDeviceModels
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionDeviceModel"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition device model
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDeviceModel"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/deviceModels/{deviceModelId}:
    get:
      operationId: findExhibitionDeviceModel
      summary: Find a device model
      description: Finds a device model by id
      tags:
        - ExhibitionDeviceModels
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceModelId
          required: true
          in: path
          description: device model id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDeviceModel"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateExhibitionDeviceModel
      summary: Updates device model.
      description: Updates device model.
      tags:
        - ExhibitionDeviceModels
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionDeviceModel"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceModelId
          required: true
          in: path
          description: device model id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDeviceModel"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteExhibitionDeviceModel
      summary: Deletes device model.
      description: Delets exhibition device model.
      tags:
        - ExhibitionDeviceModels
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceModelId
          required: true
          in: path
          description: device model id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/devices:
    get:
      operationId: listExhibitionDevices
      summary: List devices
      description: List exhibition devices
      tags:
        - ExhibitionDevices
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: Exhibition id
          schema:
            type: string
            format: uuid
        - name: exhibitionGroupId
          in: query
          description: Filter by exhibition group id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A device list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ExhibitionDevice"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createExhibitionDevice
      summary: Create a device
      description: Creates new exhibition device
      tags:
        - ExhibitionDevices
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionDevice"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition device
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDevice"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/devices/{deviceId}:
    get:
      operationId: findExhibitionDevice
      summary: Find a device
      description: Finds a device by id
      tags:
        - ExhibitionDevices
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceId
          required: true
          in: path
          description: device id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition device
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDevice"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateExhibitionDevice
      summary: Updates device.
      description: Updates device.
      tags:
        - ExhibitionDevices
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionDevice"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceId
          required: true
          in: path
          description: device id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionDevice"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteExhibitionDevice
      summary: Deletes device.
      description: Delets exhibition device.
      tags:
        - ExhibitionDevices
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: deviceId
          required: true
          in: path
          description: device id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/pages:
    get:
      operationId: listExhibitionPages
      summary: List pages
      description: List exhibition pages
      tags:
        - ExhibitionPages
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A page list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ExhibitionPage"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createExhibitionPage
      summary: Create a page
      description: Creates new exhibition page
      tags:
        - ExhibitionPages
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionPage"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition page
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionPage"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /exhibitions/{exhibitionId}/pages/{pageId}:
    get:
      operationId: findExhibitionPage
      summary: Find a page
      description: Finds a page by id
      tags:
        - ExhibitionPages
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: pageId
          required: true
          in: path
          description: page id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionPage"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updateExhibitionPage
      summary: Updates page.
      description: Updates page.
      tags:
        - ExhibitionPages
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExhibitionPage"
        description: Payload
        required: true
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: pageId
          required: true
          in: path
          description: page id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExhibitionPage"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deleteExhibitionPage
      summary: Deletes page.
      description: Delets exhibition page.
      tags:
        - ExhibitionPages
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: pageId
          required: true
          in: path
          description: page id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /pageLayouts:
    get:
      operationId: listPageLayouts
      summary: List page layouts
      description: List page layouts
      tags:
        - PageLayouts
      responses:
        "200":
          description: A page layout list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PageLayout"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createPageLayout
      summary: Create a page layout
      description: Creates new page layout
      tags:
        - PageLayouts
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PageLayout"
        description: Payload
        required: true
      responses:
        "200":
          description: Created exhibition page layout
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PageLayout"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /pageLayouts/{pageLayoutId}:
    get:
      operationId: findPageLayout
      summary: Find a page layout
      description: Finds a page layout by id
      tags:
        - PageLayouts
      parameters:
        - name: pageLayoutId
          required: true
          in: path
          description: page layout id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: A exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PageLayout"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      operationId: updatePageLayout
      summary: Updates page layout.
      description: Updates page layout.
      tags:
        - PageLayouts
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PageLayout"
        description: Payload
        required: true
      parameters:
        - name: pageLayoutId
          required: true
          in: path
          description: page layout id
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated exhibition
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PageLayout"
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      operationId: deletePageLayout
      summary: Deletes page layout.
      description: Delets page layout.
      tags:
        - PageLayouts
      parameters:
        - name: exhibitionId
          required: true
          in: path
          description: exhibition id
          schema:
            type: string
            format: uuid
        - name: pageLayoutId
          required: true
          in: path
          description: page layout id
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Success
        "400":
          description: Invalid request was sent to the server
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Attempted to make a call with unauthorized client
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /system/ping:
    get:
      summary: System ping endpoint
      operationId: ping
      tags:
        - system
      responses:
        '200':
          description: System ping response
          content:
            text/plain:
              schema:
                description: Returns PING
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Exhibition:
      type: object
      required:
        - name
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    ExhibitionRoom:
      type: object
      required:
        - name
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        exhibitionId:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    ExhibitionDeviceGroup:
      type: object
      required:
        - name
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        exhibitionId:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    ExhibitionDevice:
      type: object
      required:
        - name
        - groupId
        - modelId
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        exhibitionId:
          type: string
          format: uuid
          readOnly: true
        groupId:
          type: string
          format: uuid
          description: Device group id
        modelId:
          type: string
          format: uuid
          description: Device model id
        name:
          type: string
        location:
          $ref: '#/components/schemas/Point'
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    ExhibitionDeviceModel:
      type: object
      description: Describes device model used in exhibition
      required:
        - manufacturer
        - model
        - dimensions
        - resolution
        - capabilities
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        exhibitionId:
          type: string
          format: uuid
          readOnly: true
        manufacturer:
          type: string
        model:
          type: string
        dimensions:
          $ref: '#/components/schemas/ExhibitionDeviceModelDimensions'
        resolution:
          $ref: '#/components/schemas/ExhibitionDeviceModelResolution'
        capabilities:
          $ref: '#/components/schemas/ExhibitionDeviceModelCapabilities'
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    Point:
      type: object
      description: Describes a single point in a exhibition floor plan
      properties:
        x:
          type: number
          format: double
        y:
          type: number
          format: double

    ExhibitionDeviceModelDimensions:
      type: object
      description: Describes device model physical dimensions
      properties:
        width:
          type: number
          format: double
        height:
          type: number
          format: double

    ExhibitionDeviceModelResolution:
      type: object
      description: Describes device model resolution
      properties:
        x:
          type: number
          format: double
        y:
          type: number
          format: double

    ExhibitionDeviceModelCapabilities:
      type: object
      description: Describes device model capabilities
      required:
        - touch
      properties:
        touch:
          description: Whether device supports touching
          type: boolean

    VisitorSessionState:
      type: string
      enum:
        - PENDING
        - ACTIVE
        - COMPLETE

    VisitorSessionVariable:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        value:
          type: string

    VisitorSession:
      type: object
      required:
        - users
        - state
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description: Unique id for the session
        exhibitionId:
          type: string
          format: uuid
          readOnly: true
          description: Exhibition id the visiotr was attending to
        state:
          $ref: '#/components/schemas/VisitorSessionState'
        variables:
          type: array
          items:
            $ref: '#/components/schemas/VisitorSessionVariable'
        users:
          type: array
          items:
            $ref: '#/components/schemas/VisitorSessionUser'
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    VisitorSessionUser:
      type: object
      required:
        - userId
        - tagId
      properties:
        userId:
          type: string
          format: uuid
        tagId:
          type: string

    PageLayout:
      type: object
      description: Describes a layout for a page
      required:
        - name
        - data
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          description: Human readable name for the layout
        data:
          $ref: '#/components/schemas/PageLayoutView'
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    PageLayoutView:
      type: object
      required:
        - id
        - widget
        - properties
        - children
      properties:
        id:
          type: string
        widget:
          type: string
        properties:
          type: array
          items:
            $ref: '#/components/schemas/PageLayoutViewProperty'
        children:
          type: array
          items:
            $ref: '#/components/schemas/PageLayoutView'

    PageLayoutViewProperty:
      type: object
      required:
        - name
        - value
        - type
      properties:
        name:
          type: string
        value:
          type: string
        type:
          $ref: '#/components/schemas/PageLayoutViewPropertyType'

    PageLayoutViewPropertyType:
      type: string
      enum:
        - string
        - boolean
        - number
        - color

    ExhibitionPage:
      type: object
      required:
        - name
        - layoutId
        - resources
        - eventTriggers
        - events
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        exhibitionId:
          type: string
          format: uuid
          readOnly: true
          description: Id of exhibition this page belongs to
        layoutId:
          type: string
          format: uuid
          description: Id of page layout
        name:
          type: string
          description: Human readable name for the layout
        thumbnailUrl:
          type: string
          format: url
        resources:
          type: array
          items:
            $ref: '#/components/schemas/ExhibitionPageResource'
        eventTriggers:
          type: array
          items:
            $ref: '#/components/schemas/ExhibitionPageEventTrigger'
        creatorId:
          type: string
          format: uuid
          readOnly: true
        lastModifierId:
          type: string
          format: uuid
          readOnly: true
        createdAt:
          type: string
          format: date-time
          description: Created date
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          description: Date modified
          readOnly: true

    ExhibitionPageResource:
      type: object
      required:
        - id
        - data
        - type
      properties:
        id:
          type: string
        data:
          type: string
        type:
          $ref: '#/components/schemas/ExhibitionPageResourceType'

    ExhibitionPageResourceType:
      type: string
      enum:
        - text
        - image
        - video

    ExhibitionPageEventTrigger:
      type: object
      required:
        - eventId
      properties:
        events:
          type: array
          items:
            $ref: '#/components/schemas/ExhibitionPageEvent'
        delay:
          type: number
          format: double
        clickViewId:
          type: string
        next:
          type: array
          items:
            $ref: '#/components/schemas/ExhibitionPageEventTrigger'

    ExhibitionPageEvent:
      type: object
      required:
        - type
        - data
      properties:
        type:
          $ref: '#/components/schemas/ExhibitionPageEventType'
        properties:
          type: array
          items:
            $ref: '#/components/schemas/ExhibitionPageEventProperty'

    ExhibitionPageEventProperty:
      type: object
      required:
        - name
        - value
        - type
      properties:
        name:
          type: string
        value:
          type: string
        type:
          $ref: '#/components/schemas/ExhibitionPageEventPropertyType'
        
    ExhibitionPageEventPropertyType:
      type: string
      enum:
        - string
        - boolean
        - number
        - color
        
    ExhibitionPageEventType:
      type: string
      enum:
        - hide
        - show
        - setuservalue
        - navigate
        - setsrc
        - settext

    ExhibitionPageEventTransition:
      type: string
      enum:
        - fade

    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
